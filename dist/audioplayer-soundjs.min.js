!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("jquery"),require("createjs")):"function"==typeof define&&define.amd?define(["jquery","createjs"],i):"object"==typeof exports?exports["audioplayer-soundjs"]=i(require("jquery"),require("createjs")):t["audioplayer-soundjs"]=i(t.jquery,t.createjs)}(this,function(t,i){return function(t){function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){{var r=e(1);e(2)}t.exports=r},function(t,i,e){function r(t,i){if(this.$element=s(t).hide(),this.options=s.extend({},this.DEFAULTS,i),this.initialized=!1,this.playing=!1,this.tracks=[],this.index=-1,this.$playlist=s("[data-playlist]",this.$element),this.$label=s("[data-label]",this.$element),this.$play=s("[data-play]",this.$element),this.$pause=s("[data-pause]",this.$element),this.$stop=s("[data-stop]",this.$element),this.$backward=s("[data-backward]",this.$element),this.$forward=s("[data-forward]",this.$element),this.$random=s("[data-random]",this.$element),this.$element.on("click","[data-play]",s.proxy(this.play,this)),this.$element.on("click","[data-pause]",s.proxy(this.pause,this)),this.$element.on("click","[data-stop]",s.proxy(this.stop,this)),this.$element.on("click","[data-backward]",s.proxy(this.backward,this)),this.$element.on("click","[data-forward]",s.proxy(this.forward,this)),this.$element.on("click","[data-random]",s.proxy(this.random,this)),this.$element.on("click","[data-to]",s.proxy(this.to,this)),this.update(),"function"!=typeof this.DRIVERS[this.options.driver])throw new Error("Driver required");this.driver=this.DRIVERS[this.options.driver](this,this.options),this.driver.init(s.proxy(this.init,this))}var s=e(3),a=s.fn.audioplayer;s.extend(r.prototype,{DEFAULTS:{driver:"",url:void 0,preferFlash:!0,autoPlay:!0,random:!1,backwardDelay:2e3},DRIVERS:{},init:function(){var t=this;this.initialized||(this.tracks=[],this.$playlist.find("a,button").each(function(i){var e=s(this),r=e.attr("title")||e.attr("data-title")||e.text(),a=e.attr("href")||e.attr("data-url");void 0===e.attr("data-to")&&e.attr("data-to",i),t.driver.create(r,a)}),this.initialized=!0,this.update(),this.$element.show(),this.$element.trigger("initialized.audioplayer",this.getCurrent()),"function"==typeof this.options.onready&&this.options.onready.call(this.$element),this.options.autoPlay&&this.next())},add:function(t){this.tracks.push(t)},update:function(){this.$element.toggleClass("playing",this.playing),this.$label.text(this.getCurrent()?this.getCurrent().id:""),this.$play.prop("disabled",!(this.initialized&&!this.playing)),this.$pause.prop("disabled",!(this.initialized&&this.playing)),this.$stop.prop("disabled",!(this.initialized&&this.playing)),this.$backward.prop("disabled",!this.initialized),this.$forward.prop("disabled",!this.initialized),this.$random.prop("disabled",!this.initialized)},getCurrent:function(){return this.tracks.length?this.tracks[-1===this.index?0:this.index]:null},find:function(t){var i=this.tracks.length;if(this.getCurrent()&&this.getCurrent().id===t)return this.getCurrent();for(;i--;)if(this.tracks[i].id===t)return this.tracks[i];return null},play:function(t){t&&t.preventDefault(),this.initialized&&this.getCurrent()&&(this.driver.play(),this.playing=!0,this.update(),this.$element.trigger("play.audioplayer",this.getCurrent()))},pause:function(t){t&&t.preventDefault(),this.initialized&&this.getCurrent()&&(this.driver.pause(),this.playing=!1,this.update(),this.$element.trigger("pause.audioplayer",this.getCurrent()))},stop:function(t){t&&t.preventDefault(),this.initialized&&this.getCurrent()&&(this.driver.stop(),this.playing=!1,this.update(),this.$element.trigger("stop.audioplayer",this.getCurrent()))},backward:function(t){t&&t.preventDefault(),this.initialized&&(this.getCurrent().position<this.options.backwardDelay?(this.stop(),this.index-1>=0?this.index--:this.index=this.tracks.length-1,this.$element.trigger("backward.audioplayer",this.getCurrent()),this.play()):(this.driver.setPosition(0),this.$element.trigger("backward.audioplayer",this.getCurrent())))},forward:function(t){t&&t.preventDefault(),this.initialized&&(this.stop(),this.index+1<this.tracks.length?this.index++:this.index=0,this.$element.trigger("forward.audioplayer",this.getCurrent()),this.play())},random:function(t){var i,e,r=this.tracks.length;if(this.initialized)if(t&&t.preventDefault(),1==r)this.stop(),this.play();else if(2==r)this.forward();else{this.stop(),i=[];for(e in this.tracks)e!=this.index&&i.push(e);this.index=i[Math.floor(Math.random()*i.length)],this.$element.trigger("random.audioplayer",this.getCurrent()),this.play()}},next:function(t){t&&t.preventDefault(),this.initialized&&(this.options.random?this.random():this.forward(),this.$element.trigger("next.audioplayer",this.getCurrent()))},to:function(t){var i=t.target?parseInt(s(t.target).attr("data-to")):t;t.target&&t.preventDefault(),this.initialized&&(0>i?i=0:i>=this.tracks.length&&(i=this.tracks.length-1),i!=this.index&&(this.stop(),this.index=i,this.$element.trigger("to.audioplayer",this.getCurrent()),this.play()))}}),s.fn.audioplayer=function(t){return this.each(function(){var i=s(this),e=i.data("wxr.audioplayer"),r="object"==typeof t&&t;e||i.data("wxr.audioplayer",e=new this.Constructor(this,r)),"string"==typeof t&&e[t]()})},s.fn.audioplayer.Constructor=r,s.fn.audioplayer.noConflict=function(){return s.fn.audioplayer=a,this},t.exports=r},function(t,i,e){function r(t,i){this.player=t,this.options=n.extend({},this.DEFAULTS,i),a.addEventListener("fileload",n.proxy(this._onFileload,this))}var s=e(1),a=e(4).Sound,n=e(3);n.extend(r.prototype,{DEFAUTS:{url:void 0},init:function(t){t&&t()},create:function(t,i){a.registerSound(i,t)},play:function(){var t=this.player.getCurrent();t&&t.play()},pause:function(){var t=this.player.getCurrent();t&&t.pause()},stop:function(){var t=this.player.getCurrent();t&&t.stop()},setPosition:function(t){var i=this.player.getCurrent();i&&i.setPosition(t)},_onFileload:function(t){var i=a.createInstance(t.id);i.addEventListener("complete",n.proxy(this.player.next,this.player)),this.player.add(i),this.player.options.autoPlay&&!this.player.playing&&this.player.play()}}),s.prototype.DEFAULTS.driver="soundjs",s.prototype.DRIVERS.soundjs=function(t,i){return i=n.extend({},i,r.prototype.DEFAULTS),plugins=[createjs.WebAudioPlugin,createjs.HTMLAudioPlugin],i.url&&(createjs.FlashPlugin.swfPath=i.url),i.preferFlash?plugins.unshift(createjs.FlashPlugin):plugins.push(createjs.FlashPlugin),a.registerPlugins(plugins),new r(t,i)},t.exports=s.prototype.DRIVERS.soundjs},function(i){i.exports=t},function(t){t.exports=i}])});
//# sourceMappingURL=audioplayer-soundjs.min.js.map
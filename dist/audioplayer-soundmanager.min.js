!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function i(i,e){if(this.options=t.extend({},this.DEFAULTS,e),this.$element=t(i).hide(),this.initialized=!1,this.playing=!1,this.sounds=[],this.index=-1,this.$playlist=t("[data-playlist]",this.$element),this.$label=t("[data-label]",this.$element),this.$play=t("[data-play]",this.$element),this.$pause=t("[data-pause]",this.$element),this.$stop=t("[data-stop]",this.$element),this.$backward=t("[data-backward]",this.$element),this.$forward=t("[data-forward]",this.$element),this.$random=t("[data-random]",this.$element),this.$element.on("click","[data-play]",t.proxy(this.play,this)),this.$element.on("click","[data-pause]",t.proxy(this.pause,this)),this.$element.on("click","[data-stop]",t.proxy(this.stop,this)),this.$element.on("click","[data-backward]",t.proxy(this.backward,this)),this.$element.on("click","[data-forward]",t.proxy(this.forward,this)),this.$element.on("click","[data-random]",t.proxy(this.random,this)),this.$element.on("click","[data-to]",t.proxy(this.to,this)),this.update(),"function"!=typeof this.DRIVERS[this.options.driver])throw new Error("Driver required");this.driver=this.DRIVERS[this.options.driver](this,this.options),this.driver.init(t.proxy(this.init,this))}var e=window.soundManager,s=t.fn.audioplayer;t.extend(i.prototype,{DEFAULTS:{driver:"",url:void 0,preferFlash:!0,autoPlay:!0,random:!1,backwardDelay:2e3},DRIVERS:{},init:function(){var i=this,e=t.proxy(this.next,this);this.initialized||(this.sounds=[],this.$playlist.find("a,button").each(function(s){var a=t(this),n=a.attr("title")||a.attr("data-title")||a.text(),r=a.attr("href")||a.attr("data-url");void 0===a.attr("data-to")&&a.attr("data-to",s),i.sounds.push(this.driver.add(n,r,e))}),this.initialized=!0,this.update(),this.$element.show(),this.$element.trigger("initialized.audioplayer",this.getCurrent()),"function"==typeof this.options.onready&&this.options.onready.call(this.$element),this.options.autoPlay&&this.next())},update:function(){this.$element.toggleClass("playing",this.playing),this.$label.text(this.getCurrent()?this.getCurrent().id:""),this.$play.prop("disabled",!(this.initialized&&!this.playing)),this.$pause.prop("disabled",!(this.initialized&&this.playing)),this.$stop.prop("disabled",!(this.initialized&&this.playing)),this.$backward.prop("disabled",!this.initialized),this.$forward.prop("disabled",!this.initialized),this.$random.prop("disabled",!this.initialized)},getCurrent:function(){return this.sounds.length?this.sounds[-1==this.index?0:this.index]:void 0},play:function(t){t&&t.preventDefault(),this.getCurrent()&&(this.driver.play(this.getCurrent().id),this.playing=!0,this.update(),this.$element.trigger("play.audioplayer",this.getCurrent()))},pause:function(t){t&&t.preventDefault(),this.getCurrent()&&(this.driver.pause(this.getCurrent().id),this.playing=!1,this.update(),this.$element.trigger("pause.audioplayer",this.getCurrent()))},stop:function(t){t&&t.preventDefault(),this.getCurrent()&&(this.driver.stop(this.getCurrent().id),this.playing=!1,this.update(),this.$element.trigger("stop.audioplayer",this.getCurrent()))},backward:function(t){t&&t.preventDefault(),this.getCurrent().position<this.options.backwardDelay?(this.stop(),this.index-1>=0?this.index--:this.index=this.sounds.length-1,this.$element.trigger("backward.audioplayer",this.getCurrent()),this.play()):(e.setPosition(this.getCurrent().id,0),this.$element.trigger("backward.audioplayer",this.getCurrent()))},forward:function(t){t&&t.preventDefault(),this.stop(),this.index+1<this.sounds.length?this.index++:this.index=0,this.$element.trigger("forward.audioplayer",this.getCurrent()),this.play()},random:function(t){var i,e,s=this.sounds.length;if(t&&t.preventDefault(),1==s)this.stop(),this.play();else if(2==s)this.forward();else{this.stop(),i=[];for(e in this.sounds)e!=this.index&&i.push(e);this.index=i[Math.floor(Math.random()*i.length)],this.$element.trigger("random.audioplayer",this.getCurrent()),this.play()}},next:function(t){t&&t.preventDefault(),this.options.random?this.random():this.forward(),this.$element.trigger("next.audioplayer",this.getCurrent())},to:function(i){var e=i.target?parseInt(t(i.target).attr("data-to")):i;i.target&&i.preventDefault(),0>e?e=0:e>=this.sounds.length&&(e=this.sounds.length-1),e!=this.index&&(this.stop(),this.index=e,this.$element.trigger("to.audioplayer",this.getCurrent()),this.play())}}),t.fn.audioplayer=function(i){return this.each(function(){var e=t(this),s=e.data("wxr.audioplayer"),a="object"==typeof i&&i;s||e.data("wxr.audioplayer",s=new this.Constructor(this,a)),"string"==typeof i&&s[i]()})},t.fn.audioplayer.Constructor=i,t.fn.audioplayer.noConflict=function(){return t.fn.audioplayer=s,this}});
!function(n){"function"==typeof define&&define.amd?define(["jquery","soundmanager"],n):"object"==typeof exports?n(require("jquery"),require("soundmanager")):n(jQuery,soundManager)}(function(n,e,t){function o(e,t){this.player=e,this.options=n.extend({},this.DEFAULTS,t)}n.extend(o.prototype,{DEFAUTS:{url:t},init:function(t){e.setup(n.extend({onready:t},this.options))},add:function(n,t,o){e.createSound({id:n,url:t,onfinish:o})},play:function(n){e.play(n)},pause:function(n){e.pause(n)},stop:function(n){e.stop(n)}}),n.fn.audioplayer.Constructor.prototype.DRIVERS.soundmanager=function(n,e){return new o(n,e)}});
//# sourceMappingURL=audioplayer-soundmanager.min.js.map